%% Abschnitt1.tex
%% $Id: Abschnitt1.tex 28 2007-01-18 16:31:32Z bless $
%%

%% ==============================
\section{Evolution{\"a}rer Algorithmus}
%% ==============================

%% ==============================
\subsection{Signal}
%% ==============================
Ein Signal bildet eine Vibration ab. Dabei besitzt ein Signal Attribute, die die obengenannte Reaktion darstellen sollten. Als man sich die Einstellungsm{\"o}glichkeiten einer Vibration des Wearable genauer angeguckt hat, hat man festgestellt, dass man die L{\"a}nge und die St{\"a}rke einer Vibration einstellen kann. Das hat zur Folge, dass diese zwei Faktoren als die Attribute eines Signales benutzt wurden um eine Vibration zu repr{\"a}sentieren.

Man stellt sich jetzt die Frage,
Wie lang sollen die Vibrationen denn jetzt sein ? 

Um diese Frage zu beantworten, guckt man sich anhand an dem Paper \cite{pescara2016ruttelflug} die benutzten Vibrationsl{\"a}ngen an. Da wurden die Grenzen zwischen 100 und 1000ms f{\"u}r eine Vibration benutzt. Diese Werte hat man so {\"u}bernommen. Das bedeutet, ein Signal hat eine minimale L{\"a}nge von 100ms und eine maximale L{\"a}nge von 1000 ms. 

Anhand der Hypothese der Bachelorarbeit wolle man wissen, wie gut sich personalisierte Vibrationen im Vergleich zu generischen Vibrationen verbessern. Diese Frage l{\"a}sst sich wie folgt beantworten. Erstens musste man sich {\"u}berlegen, wie man personalisierte Vibrationen mittels dem EA f{\"u}r einen Probanden bestimmen will.
Au{\ss}erdem sollte man herausfinden was f{\"u}r Signale noch gut voneinander unterscheidbar sind, die die Grenzen von 100ms bis 1000ms besitzen.
Man habe sich auf drei Typen von Signalen festgelegt, die als Kurz, Mittel und Lang definiert. Dadurch wolle man wissen, ob ein Signal als Kurz, Mittel oder Lang empfunden wurde.

Die jeweiligen Typen definieren innerhalb der Grenzen von 100ms und 1000ms ein Intervall, das sich voneinander nicht {\"u}berschneiden kann. Abgesehen davon ist der niedrigste Messwert von Lang Signal allgemein gr{\"o}{\ss}er als der h{\"o}chste Messwert von Mittel Signal. Wiederum ist die kleinste Intensit{\"a}t von Mittel Signal ist in der Regel gr{\"o}{\ss}er als die gr{\"o}{\ss}te Internsit{\"a}t von Kurz Signal. Als Beispiel habe man f{\"u}r Kurz die Intervallgrenzen 100ms und 300ms, f{\"u}r Mittel habe man dann die Intervallgrenzen von 400ms bis 600ms und f{\"u}r Lang habe man die Intervallgrenzen von 700ms bis 1000ms. 
Allerdings wurde es darauf geachtet, dass die Grenzen nicht aufeinander liegen, sondern einen Abstand zwischen den Grenzen existiert. Bei der St{\"a}rke einer Vibration wurde man an der Darstellbarkeit des Wearable gebunden. Nachdem man herausgefunden hat, dass man nur die Bereiche von 0x7FFF bis 0xFFFF als merkbare Vibrationsst{\"a}rken besitzt, hat man sich diese Bereiche in 5 Stufen eingeteilt. Daraus folgt dass man sich f{\"u}r den sp{\"a}teren Verlauf f{\"u}nf Zust{\"a}nde definiert. 

\begin{tabular}{lcr}
  Signalst{\"a}rke & Namen & Zustandsnamen \\
  $\mathtt{0x7FFF}$ & Very Weak & $q_{VWeak}$ \\
  $\mathtt{0x9FFF}$ & Weak & $q_{Weak}$ \\
  $\mathtt{0xBFFF}$ & OK & $q_{OK}$ \\
  $\mathtt{0xDFFF}$ & Strong & $q_{Strong}$ \\
  $\mathtt{0xFFFF}$ & Very Strong & $q_{VStrong}$ \\
\end{tabular}

%% ==============================
\subsection{Eingabe f{\"u}r den Algorithmus}
%% ==============================
Als Eingabe f{\"u}r den Algorithmus ben{\"o}tigt man eine Population von Individuen. Die Individuen sind in diesem Fall Signale. 
Nicht jede Person empfindet ein vorgegebenes Kurzes Signal gleich wie eine andere Person, somit musste man zuvor den Benutzer befragen, was er als Kurz, Mittel und Lang empfindet. Zuerst habe man alle Signale abgespielt, damit der Proband wusste, was Ihn erwartet. 
Nachdem alle Signale abgespielt wurden, wurde jedes Signal einzeln abgespielt und der Proband hatte die Aufgabe das abgespielte Signal der Kategorie Kurz, Mittel oder Lang zuzuordnen. 
Jedem Probanden wurde insgesamt 10 Signale mit der gleichen Vibrationsst{\"a}rke abgespielt, die Signalel{\"a}nge ist dabei gleich verteilt.
Dabei wurden alle 10 Signale in einer zuf{\"a}lligen Reihenfolge abgespielt.

Nach der Eingabe des Probanden erh{\"a}lt man beispielsweise folgende Bewertung. Diese Eingabe ist ideal, da alle Signaltypen direkt hintereinander vorliegen, so w{\"u}rde man hier ein die Grenzen sofort aus der Tabelle entnehmen k{\"o}nnen. Diese belaufen sich f{\"u}r Kurz zwischen 100 und 300 ms, f{\"u}r Mittel zwischen 400ms und 600ms und f{\"u}r Lang zwischen 700 und 1000ms.

\begin{table}[]
\centering
\caption{My caption}
\label{my-label}
\begin{tabular}{|l|l|l|l|l|l|l|l|l|l|l|}
\hline
 Signall{\"a}nge (in ms) & 100 & 200 & 300 & 400 & 500 & 600 & 700 & 800 & 900 & 1000 \\ \hline
 Erkannten Signaltyp & Kurz & Kurz & Kurz & Mittel & Mittel & Mittel & Lang & Lang & Lang & Lang \\ \hline
\end{tabular}
\end{table}

Falls die Eingabe jedoch nicht so Ideal sein sollte, wie in dem Beispiel gerade eben, mussten ein paar Vorkehrungen getroffen werden. Um einige Sonderf{\"a}lle auszuschlie{\ss}en, hat man {\"u}berpr{\"u}ft, ob das Signal mit der L{\"a}nge von 100ms ein Kurzes Signal ist und das Signal mit der L{\"a}nge von 1000ms ein Langes Signal ist, sowie man annimmt, dass mindestens jeder Signaltyp mindesten zwei mal ausgew{\"a}hlt wurde. Sollte dies nicht der Fall sein, so w{\"u}rde man den Benutzer dazu bitten, die zehn Signale erneut zu bewerten. 

\begin{table}[]
\centering
\caption{My caption}
\label{my-label}
\begin{tabular}{|l|l|l|l|l|l|l|l|l|l|l|}
\hline
 Signall{\"a}nge (in ms) & 100 & 200 & 300 & 400 & 500 & 600 & 700 & 800 & 900 & 1000 \\ \hline
 Erkannten Signaltyp & Kurz & Kurz & Mittel & Mittel & Lang & Mittel & Lang & Lang & Lang & Lang \\ \hline
\end{tabular}
\end{table}

Man beginnt damit die neuen Intervallgrenzen zu bestimmen. Diese wurden anhand des Beispiels exemplarisch in der Tabelle bestimmt, dabei ist jede Spalte eine Itteration.

\begin{table}[]
\centering
\caption{My caption}
\label{my-label}
\begin{tabular}{|l|l|l|l|l|l|l|l|l|l|}
\hline
Itterationen            & 1. & 2. & 3. & 4. & 5. & 6. & 7. & 8. & 10. \\ \hline
$Kurz_{Min}$   & 100          & 100          & 100          & 100          & 100          & 100          & 100          & 100          & 100           \\ \hline
$Kurz_{Max}$   & 100          & 200          & 200          & 200          & 200          & 200          & 200          & 200          & 200           \\ \hline
$Mittel_{Min}$ & 100          & 200          & 300          & 300          & 300          & 300          & 300          & 300          & 300           \\ \hline
$Mittel_{Max}$ & 100          & 200          & 300          & 400          & 400          & 600          & 600          & 600          & 600           \\ \hline
$Lang_{Min}$   & 100          & 200          & 300          & 400          & 500          & 600          & 700          & 700          & 700           \\ \hline
$Lang_{Max}$   & 100          & 200          & 300          & 400          & 500          & 600          & 700          & 800          & 1000          \\ \hline
\end{tabular}
\end{table}

Bei einer kleinen Abweichung von zwei nebeneinanderliegen von zwei Werten ist dies noch akzeptabel, bei gr{\"o}{\ss}eren Abweichungen, hat man Benutzer noch einmal darum gebeten erneut zu bewerten. Im Verlauf der Studie musste man nur bei einer Minderheit von Probanden ein weiteres mal darum bitten, die Signale neu zu bewerten. Denn es ist oft schon so gewesen, dass die Probanden es wie im Idealfall zugeordnet hatten.

Nachdem man jetzt die Grenzen für einen Probanden bestimmt hat, kann man endlich die Startpopulation des Algorithmus erzeugen. 
Bei der Startpopulation hat man für jeden Signaltypen zehn Signale. 
Die zehn Signale beinhalten zwei Signale, die das Minimum und Maximum des jeweiligen Signaltypen repräsentieren. Die restlichen acht Signale erhalten eine zufällige Länge innerhalb des Intervalls. Die Stärke eines Signal wird zufällig für jedes Signal zufällig zugewiesen. 
Man besitzt somit für die Startpopulation dreißig Signale, die jeweils in zehn Kurze, Mittlere und Lange Signale unterteilt sind. 

%Anhand dem Verfahren hat man nur eine grobe Unterteilung, deswegen {\"u}berpr{\"u}ft man, ob diese grobe Absch{\"a}tzung passt.
%Zun{\"a}chst bestimmt man f{\"u}r jeden Signaltypen das arithmetische Median, was in diesem Fall 150 f{\"u}r Kurz, 433 f{\"u}r Mittel und 780 f{\"u}r Lang ist.
%Da sich die Grenzen vom Minimum von Kurz und das Maximum von Lang nicht {\"a}ndern, sind $Kurz_{Min}$ = 100ms und $Lang_{Max}$ = 1000ms bei jedem Probanden fest definiert und beginnt damit f{\"u}r Kurz und Lang die Grenzen zu bestimmen.
%Zuerst berechnet man anhand der groben Absch{\"a}tzung der Grenzen den Mittelwert, dabei ergibt sich $Kurz_{Mit}$ = 150 und $Lang_{Mit}$ = 850.

%Wenn das arithmetische Median kleiner als der Mittelwert ist, dann berechnet man bei Kurz ein neues Maximum und bei Lang ein neues Minimum.
%Bei Kurz ist dies nicht der Fall, da der Median und Mittelwert beide 150 sind, daher bleibt $Kurz_{Max}$ = 200ms.
%Bei Lang tritt dieser Fall ein und daher berechnet anhand der Formel $Lang_{Min} = (2 * Lang_{Med}) - Lang_{Max}$ daraus ergibt sich f{\"u}r $Lang_{Min}$ = 560. 

%W{\"u}rden sich die erkannten Signaltypen {\"u}berschneiden, so f{\"a}ngt man an das arithmetische Mittel von Kurz, Mittel und Lang zu bilden; desweiteren werden neue Grenzen bestimmt, indem man von der kleinsten Signall{\"a}nge anf{\"a}ngt und diese dann dem zuwei{\ss}t, was ausgew{\"a}hlt worden ist. Man hat drei mal das Minimum und das Maximum von Kurz, Mittel und Lang, die neu bestimmt werden, dabei wird anhand der folgenden Tabelle gezeigt, wie die neuen Intervalle bestimmt werden.


%Da man wei{\ss}, dass das Minimum von Kurz 100ms und das Maximum von Lang 1000ms ist, berechnet man die Intervalle von Kurz und Lang zuerst. Dabei berechnet man den Mittelwert um herauszufinden, ob das arithmetische Mittel identisch mit dem Mittel wert ist. Wenn dies der Fall ist, so sind die Grenzen f{\"u}r den Fall richtig und es muss f{\"u}r den Signaltypen nichts weiter berechnet werden. 

%Da man wei{\ss}, dass das Minimum von Kurz 100 ms und das Maximum von Lang 1000ms ist, berechnet man die Differenz zwischen dem  und dem Minimum von Kurz. Diese Differenz auf das Median dazu addiert und {\"u}berpr{\"u}ft, ob 


%% ==============================
\subsection{Bewertung des Algorithmus}
%% ==============================

Jedes Individuum der Startpopulation muss für die Fortsetzung des nächsten Schritts vom Algorithmus bewertet werden.
Um diese Bewertung zu erhalten hätte man aus einigen Alternativen wählen können wobei ich hier ein weiteres erläutern werde und wieso man dieses nicht gewählt hat. 

Zuerst könnte man hergehen und jedes Signal aus der Population dem Probanden abspielen und fragen was für ein Signaltyp er erkannt hat, wie man es bei den ersten zehn Signalen gemacht hat um die Grenzen der Signaltypen zu bestimmen. 

Der erste Ansatz wäre man würde genau dies tun, dabei würde man die Anzahl der richtigen Zuweisungen und Abweichungen zählen um eine geeigneten Fitnesswert zu bestimmen. Ferner würde das bedeuten, dass für eine Population ein Individuum mehrmals abgespielt werden müsse um eine Bewertung des einzelnen Individuums zu erhalten. Bei einer Annahme von fünf Bewertungen pro Individuum, um nur eine Population damit bewerten zu können, müsste der Proband eine Anzahl von 150 Signalen bewerten, damit der Algorithmus eine Generation bestimmen kann. Dies würde bedeuten, dass wenn man vier Generationen bestimmen wollen würde, man auf eine Anzahl von 600 Bewertungen alleine für die Bestimmung des personalisierten Wertes mithilfe dem EA. 

Aufgrund der Tatsache, dass Probanden nicht so lange an einer freiwilligen Studie teilnehmen wollen, habe man sich für einen anderen Ansatz entschieden. Man muss akzeptieren, dass man über mehrere Generationen hinweg die komplette Population bewerten muss. Das heißt, dass man pro Generation 30 Signale abspielen muss. Um eine Generation zu bestimmen habe man sich Gedanken darüber gemacht, wie man so ein Signal bewerten soll. Dabei ist man zu dem Entschluss gekommen, dass man man den Benutzer zuerst fragt, was für ein Signaltyp er erkannt habe. Weiterhin habe man Ihn zwei Fragen wie in einem Fragebogen (Likert-Skala) gefragt, wie gut er das Signal erkannt wurde und wie man die Stärke des Signals empfunden hat. 

Wie oben schon erwähnt,  für die Anfangspopulation hat jedes Individuum eine zufällige Stärke zugewiesen. Dabei entspricht die Stärke einem Zustand aus dem Zustandsdiagramm Y. Anhand der Bewertung verändert sich der aktuelle Zustand der Stärke eines aktuellen Individuums um bis zu zwei Zustände. Dabei ist die Wertigkeit der Antwort der Frage in der Tabelle XX beschrieben. Dabei bedeutet +2, dass der aktuelle Zustand zwei mal +1 im Zustandsdiagramm XW ausführt. 

%\input{chapter/04entwurf/0421signalZustandsdiagramm}

\begin{table}[]
\centering
\caption{My caption}
\label{my-label}
\begin{tabular}{llllll}
Antwort   & sehr schlecht          & schlecht               & ok                    & gut                   & sehr gut              \\
Wertigkeit & \multicolumn{1}{c}{-2} & \multicolumn{1}{c}{-1} & \multicolumn{1}{c}{0} & \multicolumn{1}{c}{+1} & \multicolumn{1}{c}{+2}
\end{tabular}
\end{table}

Die Antwort was für ein Signal erkannt wurde zeigt, was für ein Signal der Proband erkannt hat. Dies ist für die Bewertung der Studie hilfreich.
Die letzte Frage die der Benutzer zu beantworten hat, wie er das Signal erkannt hat, hat die Wertigkeit wie in Tabelle XA definiert. Diese Antwort auf die Frage, ist der entscheidende Wert, der den Fitnesswert repräsentiert. 

\begin{table}[]
\centering
\caption{My caption}
\label{my-label}
\begin{tabular}{llllll}
Antwort   & sehr schlecht          & schlecht               & ok                    & gut                   & sehr gut              \\
Wertigkeit & \multicolumn{1}{c}{1} & \multicolumn{1}{c}{2} & \multicolumn{1}{c}{3} & \multicolumn{1}{c}{4} & \multicolumn{1}{c}{5}
\end{tabular}
\end{table}

%% ==============================
\subsection{Erzeugung der nächsten Generation}
%% ==============================
Im Anschluss nach der Bewertung erfolgt die Bestimmung der nächsten Generation. Dies erfolgt mit der Selektion, Rekombination und Mutation der Gene. 

%% ==============================
\subsubsection{Selektion}
%% ==============================
Für die Selektion wird für jeden Signaltyp ein neuer Pool erzeugt. 
Im Anschluss daran werden die drei Maxima für jeden Signaltypen von allen Fitnesswerten bestimmt. 
Anhand der Formel $(Fitnesswert eines Individuums / Maximum des zugehörigen Signaltypens) * 100$ lässt sich die Häufigkeit bestimmen, wie oft ein Individuum in den Pool hinzugefügt wird. Als Beispiel hat man ein Maximum von 5 und einen Fitnesswert von 2, daraus ergibt sich 40, das heißt, es wird 40 mal das jeweilige Individuum in den Pool hinzufügt wird. Dabei wird jedes Individuum in das Pool hinzugefügt, welchem Signaltyp es angehört. 

Nach der Erzeugung der Pools wird eine Rekombination durch zwei zufällig ausgewählte Individuen ausgeführt.


%% ==============================
\subsubsection{Rekombination}
%% ==============================
Bei der Rekombination werden die die Gene Stärke 
\dots

%% ==============================
\section{Muster}
%% ==============================
Ein Muster ist eine Folge von mehreren Signalen. 
Nach dem Algorithmus hat man eine Population von Individuen, dabei bestimmt man das Maximum und Minimum der Signaltypen und berechnet den Mittelwert aus.
 Das entscheidende bei den Mustern ist es gewesen,  
